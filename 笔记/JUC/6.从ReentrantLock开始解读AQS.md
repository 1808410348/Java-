## 从ReentrantLock开始解读AQS

Lock接口的实现类，基本都是通过【聚合】了一个【队列同步器】的子类完成线程访问控制的

#### ReentrantLock的原理

![ReentrantLock原理图](images/ReentrantLock原理图.jpg)

#### 从最简单的lock方法开始看看公平和非公平

![ReentrantLock构造方法](images/ReentrantLock构造方法.jpg)

![lock方法看公平与非公平锁](images/lock方法看公平与非公平锁.jpg)

可以明显看出公平锁和非公平锁的lock()方法唯一的区别就在于公平锁在获取同步状态时多了一个限制条件：hasQueuePredecessors()，hasQueuePredecessors是公平锁加锁时判断等待队列中是否存在有效结点的方法。





